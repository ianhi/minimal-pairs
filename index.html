<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bengali Minimal Pairs</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëÇ</text></svg>">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">Bengali Minimal Pairs Practice</h1>

        <div class="mb-6">
            <label for="typeSelect" class="block text-lg font-medium text-gray-700 mb-2">Select Minimal Pair Type:</label>
            <select id="typeSelect" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-700 bg-white">
                <!-- Options will be populated by JavaScript -->
            </select>
        </div>


        <div class="flex flex-col items-center gap-4">
            <p class="text-lg text-gray-600">Click "Play Word" to hear one of the words, then choose which one you heard.</p>
            <div id="playingStatus" class="playing-indicator hidden"></div>
            <button id="playButton" class="button-primary w-full max-w-xs">Play Word</button>
        </div>

        <div id="wordChoices" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
            <button id="word1Button" class="word-button bg-base-color" disabled></button>
            <button id="word2Button" class="word-button bg-base-color" disabled></button>
        </div>

        <div id="feedback" class="text-xl mt-4"></div>

        <div class="flex flex-col md:flex-row justify-center gap-4 mt-6">
            <button id="submitGuessButton" class="button-primary w-full md:w-auto" disabled>Submit Guess</button>
            <button id="nextButton" class="button-secondary w-full md:w-auto" disabled>Skip Pair <span id="skipEmoji">‚è≠Ô∏è</span></button>
        </div>

        <div class="text-lg text-gray-700 mt-4">
            Score: <span id="score">0</span> / <span id="totalAttempts">0</span>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8 mx-auto w-full max-w-md">
            <button id="resetButton" class="button-secondary flex items-center justify-center gap-2">Reset Game <span id="resetEmoji">üîÑ</span></button>
            <button id="settingsButton" class="button-secondary flex-1 flex items-center justify-center gap-2">
                Settings <span id="settingsEmoji">‚öôÔ∏è</span>
            </button>
            <button id="historyButton" class="button-secondary flex-1 flex items-center justify-center gap-2">
                History <span id="historyEmoji">üìö</span>
            </button>
        </div>
    </div>

    <div id="settingsModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close-button" id="closeSettingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-setting-item toggle-switch">
                    <label for="modalPlayGuessToggle">Play guess on click</label>
                    <input type="checkbox" id="modalPlayGuessToggle">
                </div>
                <div class="modal-setting-item toggle-switch">
                    <label for="modalAutoPlayNextWordToggle">Auto-play next word</label>
                    <input type="checkbox" id="modalAutoPlayNextWordToggle">
                </div>
                <div class="modal-setting-item">
                    <label for="modalAutoPlayDelay">Auto-play delay (ms)</label>
                    <input type="number" id="modalAutoPlayDelay" min="0" value="100">
                </div>
                <div class="modal-setting-item">
                    <label for="modalSpeechRate">Speech Rate (0.1-10)</label>
                    <input type="number" id="modalSpeechRate" min="0.1" max="10" step="0.1" value="1.0">
                </div>
                <div class="modal-setting-item">
                    <label for="modalSpeechPitch">Speech Pitch (0-2)</label>
                    <input type="number" id="modalSpeechPitch" min="0" max="2" step="0.1" value="1.0">
                </div>
                <div class="radio-group">
                    <label class="text-base text-gray-700">Bengali Accent:</label>
                    <div>
                        <input type="radio" id="accentKolkata" name="bengaliAccent" value="bn-IN" checked>
                        <label for="accentKolkata">Kolkata Style (India)</label>
                    </div>
                    <div>
                        <input type="radio" id="accentBangladesh" name="bengaliAccent" value="bn-BD">
                        <label for="accentBangladesh">Bangladesh Style</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="button-secondary" id="cancelSettings">Cancel</button>
                <button class="button-primary" id="saveSettings">Save</button>
            </div>
        </div>
    </div>

    <div id="historyModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Game History</h2>
                <button class="modal-close-button" id="closeHistoryModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="historyList" class="history-list w-full">
                    <p class="text-gray-500 text-center">No guesses yet.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="button-secondary" id="clearHistoryButton">Clear History</button>
                <button class="button-primary" id="okHistoryButton">OK</button>
            </div>
        </div>
    </div>

    <div id="dataErrorModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Data Loading Error</h2>
                <!-- No close button for this modal, user must acknowledge -->
            </div>
            <div class="modal-body">
                <p id="dataErrorModalMessage" class="text-gray-700 text-left">
                    Could not load the minimal pairs data required for the application to run.
                    Please try refreshing the page. If the problem persists, please check the browser console for more details.
                </p>
            </div>
            <div class="modal-footer">
                <button class="button-primary" id="dataErrorModalOkButton">OK</button>
            </div>
        </div>
    </div>

    <script src="minimal_pairs_data.js"></script> <!-- Load data first -->
    <script src="script.js" defer></script>     <!-- Then load the main script -->
</body>
</html>
